<!DOCTYPE html>
<html lang="en">
<!-- [Head] start -->

<head>
  <title>Create Server | Web Cpanel Pterodacyl</title>
  <!-- [Meta] -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Tempat Beli Panel Berkualitas Dan Bergaransi..">
  <meta name="keywords" content="Pterodactyl, Server Hosting, Bot Hosting">
  <meta name="author" content="AortaVx">

  <!-- [Favicon] icon -->
  <link rel="icon" href="../assets/images/favicon.svg" type="image/x-icon"> <!-- [Google Font] Family -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300;400;500;600;700&display=swap" id="main-font-link">
<!-- [Tabler Icons] https://tablericons.com -->
<link rel="stylesheet" href="../assets/fonts/tabler-icons.min.css" >
<!-- [Feather Icons] https://feathericons.com -->
<link rel="stylesheet" href="../assets/fonts/feather.css" >
<!-- [Font Awesome Icons] https://fontawesome.com/icons -->
<link rel="stylesheet" href="../assets/fonts/fontawesome.css" >
<!-- [Material Icons] https://fonts.google.com/icons -->
<link rel="stylesheet" href="../assets/fonts/material.css" >
<!-- [Template CSS Files] -->
<link rel="stylesheet" href="../assets/css/style.css" id="main-style-link" >
<link rel="stylesheet" href="../assets/css/style-preset.css" >

<style>
  [data-bs-theme="dark"] body { background-color: #121212 !important; }
  [data-bs-theme="dark"] .card { background-color: #1a1a1a !important; border: 1px solid #2d2d2d; }
  [data-bs-theme="dark"] .card-header { background-color: #222 !important; border-bottom: 1px solid #333; }
  [data-bs-theme="dark"] .pc-sidebar { background-color: #111 !important; border-right: 1px solid #222; }
  [data-bs-theme="dark"] .pc-sidebar .pc-link { color: #aaa; }
  [data-bs-theme="dark"] .pc-sidebar .pc-link:hover, [data-bs-theme="dark"] .pc-sidebar .pc-item.active > .pc-link { color: #13c2c2; background: rgba(19, 194, 194, 0.1); }
  [data-bs-theme="dark"] .pc-micon i { color: #13c2c2; }
  [data-bs-theme="dark"] .pc-header { background: rgba(18, 18, 18, 0.8) !important; backdrop-filter: blur(8px); border-bottom: 1px solid #222; }
</style>
<style>
  [data-bs-theme="dark"] body { background-color: #121212 !important; }
  [data-bs-theme="dark"] .card { background-color: #1a1a1a !important; border: 1px solid #2d2d2d; }
  [data-bs-theme="dark"] .card-header { background-color: #222 !important; border-bottom: 1px solid #333; }
  [data-bs-theme="dark"] .pc-sidebar { background-color: #111 !important; border-right: 1px solid #222; }
  [data-bs-theme="dark"] .pc-sidebar .pc-link { color: #aaa; }
  [data-bs-theme="dark"] .pc-sidebar .pc-link:hover, [data-bs-theme="dark"] .pc-sidebar .pc-item.active > .pc-link { color: #13c2c2; background: rgba(19, 194, 194, 0.1); }
  [data-bs-theme="dark"] .pc-micon i { color: #13c2c2; }
  [data-bs-theme="dark"] .pc-header { background: rgba(18, 18, 18, 0.8) !important; backdrop-filter: blur(8px); border-bottom: 1px solid #222; }
</style>

</head>
<!-- [Head] end -->
<!-- [Body] Start -->

<body data-pc-preset="preset-1" data-pc-direction="ltr" data-pc-theme="dark" data-bs-theme="dark">
  <!-- [ Pre-loader ] start -->
<div class="loader-bg">
  <div class="loader-track">
    <div class="loader-fill"></div>
  </div>
</div>
<!-- [ Pre-loader ] End -->
 <!-- [ Sidebar Menu ] start -->
<nav class="pc-sidebar">
  <div class="navbar-wrapper">
    <div class="m-header">
      <a href="../dashboard/index.html" class="b-brand text-primary">
        <img src="../assets/images/logo-dark.svg" class="img-fluid logo-lg" alt="logo">
      </a>
    </div>
    <div class="navbar-content">
      <ul class="pc-navbar">
        <li class="pc-item">
          <a href="/" class="pc-link">
            <span class="pc-micon"><i class="ti ti-dashboard"></i></span>
            <span class="pc-mtext">Dashboard</span>
          </a>
        </li>

        <li class="pc-item pc-caption">
          <label>Manage</label>
          <i class="ti ti-dashboard"></i>
        </li>
        <li class="pc-item active">
          <a href="/manage/create" class="pc-link">
            <span class="pc-micon"><i class="ti ti-server"></i></span>
            <span class="pc-mtext">Create Server</span>
          </a>
        </li>
         <li class="pc-item">
          <a href="/manage/list" class="pc-link">
            <span class="pc-micon"><i class="ti ti-server"></i></span>
            <span class="pc-mtext">Server Manage</span>
          </a>
         </li>
        <li class="pc-item pc-caption">
          <label>Other</label>
          <i class="ti ti-brand-chrome"></i>
        </li>
        <li class="pc-item">
          <a href="#" class="pc-link">
            <span class="pc-micon"><i class="ti ti-help"></i></span>
            <span class="pc-mtext">Support</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<!-- [ Sidebar Menu ] end --> <!-- [ Header Topbar ] start -->
<header class="pc-header">
  <div class="header-wrapper"> <!-- [Mobile Media Block] start -->
<div class="me-auto pc-mob-drp">
  <ul class="list-unstyled">
    <li class="pc-h-item pc-sidebar-collapse">
      <a href="#" class="pc-head-link ms-0" id="sidebar-hide">
        <i class="ti ti-menu-2"></i>
      </a>
    </li>
    <li class="pc-h-item pc-sidebar-popup">
      <a href="#" class="pc-head-link ms-0" id="mobile-collapse">
        <i class="ti ti-menu-2"></i>
      </a>
    </li>
  </ul>
</div>
<div class="ms-auto">
  <ul class="list-unstyled">
    <li class="dropdown pc-h-item header-user-profile">
      <a class="pc-head-link dropdown-toggle arrow-none me-0" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" data-bs-auto-close="outside" aria-expanded="false">
        <img src="../assets/images/user/avatar-2.jpg" alt="user-image" class="user-avtar">
        <span id="header-username">User</span>
      </a>
      <div class="dropdown-menu dropdown-user-profile dropdown-menu-end pc-h-dropdown">
        <div class="dropdown-header">
          <div class="d-flex mb-1">
            <div class="flex-shrink-0">
              <img src="../assets/images/user/avatar-2.jpg" alt="user-image" class="user-avtar wid-35">
            </div>
            <div class="flex-grow-1 ms-3">
              <h6 class="mb-1" id="profile-username">User</h6>
              <span>Reseller</span>
            </div>
          </div>
        </div>
        <div class="pt-2">
          <a href="/login" class="dropdown-item text-danger">
            <i class="ti ti-power"></i>
            <span>Logout</span>
          </a>
        </div>
      </div>
    </li>
  </ul>
</div>
 </div>
</header>
<!-- [ Header ] end -->

  <!-- [ Main Content ] start -->
  <div class="pc-container">
    <div class="pc-content">
      <!-- [ breadcrumb ] start -->
      <div class="page-header">
        <div class="page-block">
          <div class="row align-items-center">
            <div class="col-md-12">
              <div class="page-header-title">
                <h5 class="m-b-10">Manage</h5>
              </div>
              <ul class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item"><a href="javascript: void(0)">Manage</a></li>
                <li class="breadcrumb-item" aria-current="page">Create Server</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- [ breadcrumb ] end -->
      <!-- [ Main Content ] start -->
      <div class="row">
        <div class="col-sm-12">
          <div class="card">
            <div class="card-header">
              <h5 class="f-w-400"><i class="ti ti-plus me-1"></i> Form Create</h5>
            </div>
            <div class="card-body">
              <form id="create-server-form">
                <div class="mb-3">
                  <label class="form-label">Name</label>
                  <input type="text" class="form-control" id="server-name" placeholder="Server Name" required>
                </div>
                <div class="mb-3">
                  <label class="form-label">Version</label>
                  <select class="form-select" id="server-version">
                    <option value="Java 17">Java 17</option>
                    <option value="Java 11">Java 11</option>
                    <option value="Java 8">Java 8</option>
                    <option value="NodeJS">NodeJS</option>
                    <option value="Python">Python</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label class="form-label">Location</label>
                  <select class="form-select" id="server-location">
                    <option value="Indonesia">Indonesia</option>
                    <option value="Singapore">Singapore</option>
                    <option value="USA">USA</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label class="form-label">Memory (MB)</label>
                  <input type="number" class="form-control" id="server-memory" placeholder="1024" required>
                </div>
                <div class="mb-3">
                  <label class="form-label">Disk (MB)</label>
                  <input type="number" class="form-control" id="server-disk" placeholder="5120" required>
                </div>
                <div class="mb-3">
                  <label class="form-label">Key (Optional)</label>
                  <input type="text" class="form-control" id="server-key" placeholder="Enter valid key">
                  <small class="text-muted">Will use session key if left blank.</small>
                </div>
                <div class="d-grid mt-4">
                  <button type="submit" class="btn btn-primary" id="btn-create">Create Server</button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <div id="result-container" class="col-sm-12" style="display:none;">
          <div class="card border-success">
            <div class="card-header bg-success text-white">
              <h5 class="mb-0 text-white">âœ… Server Berhasil Dibuat!</h5>
            </div>
            <div class="card-body">
               <div id="server-details"></div>
            </div>
          </div>
        </div>

      </div>
  <!-- [ Main Content ] end -->
  <footer class="pc-footer">
    <div class="footer-wrapper container-fluid">
      <div class="row">
        <div class="col-sm my-1">
          <p class="m-0">Aortxy &#9829; Crafted By <a href="https://t.me/aortadev" target="_blank">AortaVx</a></p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Required Js -->
  <script src="../assets/js/plugins/popper.min.js"></script>
  <script src="../assets/js/plugins/simplebar.min.js"></script>
  <script src="../assets/js/plugins/bootstrap.min.js"></script>
  <script src="../assets/js/fonts/custom-font.js"></script>
  <script src="../assets/js/pcoded.js"></script>
  <script src="../assets/js/plugins/feather.min.js"></script>

  <script>
    layout_change('dark'); // Set to dark as per screenshot
    preset_change("preset-1");
    font_change("Public-Sans");

    // Fetch user info
    fetch('/api/user')
      .then(res => res.json())
      .then(data => {
        if (data.loggedIn) {
          document.getElementById('header-username').innerText = data.user;
          document.getElementById('profile-username').innerText = data.user;
        }
      });

    // Handle form submission
    document.getElementById('create-server-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const btn = document.getElementById('btn-create');
      btn.disabled = true;
      btn.innerText = 'Creating...';

      const payload = {
        name: document.getElementById('server-name').value,
        version: document.getElementById('server-version').value,
        location: document.getElementById('server-location').value,
        memory: document.getElementById('server-memory').value,
        disk: document.getElementById('server-disk').value,
        key: document.getElementById('server-key').value
      };

      try {
        const response = await fetch('/create-server', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const data = await response.json();
        if (response.ok) {
           const info = data.serverInfo;
           document.getElementById('result-container').style.display = 'block';
           document.getElementById('server-details').innerHTML = `
             <p><strong>Name:</strong> ${info.name}</p>
             <p><strong>Memory:</strong> ${info.memory} MB</p>
             <p><strong>Disk:</strong> ${info.disk} MB</p>
             <p><strong>Location:</strong> ${info.location}</p>
             <p><strong>Version:</strong> ${info.version}</p>
             <hr>
             <p class="mb-0 text-muted small">Server sedang dalam proses instalasi di panel.</p>
           `;
           document.getElementById('create-server-form').reset();
        } else {
           alert(data.message || 'Gagal membuat server.');
        }
      } catch (err) {
        console.error(err);
        alert('Terjadi kesalahan.');
      } finally {
        btn.disabled = false;
        btn.innerText = 'Create Server';
      }
    });
  </script>
</body>
</html>
